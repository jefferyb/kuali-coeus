--
-- Kuali Coeus, a comprehensive research administration system for higher education.
-- 
-- Copyright 2005-2015 Kuali, Inc.
-- 
-- This program is free software: you can redistribute it and/or modify
-- it under the terms of the GNU Affero General Public License as
-- published by the Free Software Foundation, either version 3 of the
-- License, or (at your option) any later version.
-- 
-- This program is distributed in the hope that it will be useful,
-- but WITHOUT ANY WARRANTY; without even the implied warranty of
-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-- GNU Affero General Public License for more details.
-- 
-- You should have received a copy of the GNU Affero General Public License
-- along with this program.  If not, see <http://www.gnu.org/licenses/>.
--


update krew_doc_typ_t set AUTHORIZER = 'org.kuali.coeus.propdev.impl.auth.ProposalDevelopmentWorkflowDocumentAuthorizer' where AUTHORIZER = 'org.kuali.kra.proposaldevelopment.document.authorization.ProposalDevelopmentWorkflowDocumentAuthorizer';
update krew_doc_typ_t set POST_PRCSR = 'org.kuali.coeus.common.questionnaire.impl.core.QuestionnairePostProcessor' where POST_PRCSR = 'org.kuali.kra.questionnaire.QuestionnairePostProcessor';
update krew_doc_typ_t set POST_PRCSR = 'org.kuali.coeus.sys.framework.workflow.KcPostProcessor' where POST_PRCSR = 'org.kuali.kra.workflow.KcPostProcessor';
update krew_rte_node_cfg_parm_t set VAL = '<requests name=\"PeopleFlows\">\n<activationType>R</activationType>\n<rulesEngine executorClass=\"org.kuali.coeus.propdev.impl.core.ProposalDevelopmentRulesEngineExecutorImpl\"/>\n</requests>\n' where VAL = '<requests name=\"PeopleFlows\">\n<activationType>R</activationType>\n<rulesEngine executorClass=\"org.kuali.kra.proposaldevelopment.service.impl.ProposalDevelopmentRulesEngineExecutorImpl\"/>\n</requests>\n';
update krew_rte_node_cfg_parm_t set VAL = '<split name=\"hasSync\">\n<type>org.kuali.coeus.sys.framework.workflow.SimpleBooleanSplitNode</type>\n</split>\n' where VAL = '<split name=\"hasSync\">\n<type>org.kuali.kra.kew.SimpleBooleanSplitNode</type>\n</split>\n';
update krew_rte_node_cfg_parm_t set VAL = '<split name=\"isHierarchyChild\">\n<type>org.kuali.coeus.sys.framework.workflow.SimpleBooleanSplitNode</type>\n</split>\n' where VAL = '<split name=\"isHierarchyChild\">\n<type>org.kuali.kra.kew.SimpleBooleanSplitNode</type>\n</split>\n';
update krew_rte_node_cfg_parm_t set VAL = '<split name=\"isSyncChild\">\n<type>org.kuali.coeus.sys.framework.workflow.SimpleBooleanSplitNode</type>\n</split>\n' where VAL = '<split name=\"isSyncChild\">\n<type>org.kuali.kra.kew.SimpleBooleanSplitNode</type>\n</split>\n';
update krew_rte_node_cfg_parm_t set VAL = 'org.kuali.coeus.sys.framework.workflow.SimpleBooleanSplitNode' where VAL = 'org.kuali.kra.kew.SimpleBooleanSplitNode';
update krew_rte_node_t set TYP = 'org.kuali.coeus.sys.framework.workflow.SimpleBooleanSplitNode' where TYP = 'org.kuali.kra.kew.SimpleBooleanSplitNode';
update krew_rule_attr_t set CLS_NM = 'org.kuali.coeus.common.framework.unit.admin.UnitAdministratorRoleAttribute' where CLS_NM = 'org.kuali.kra.workflow.UnitAdministratorRoleAttribute';
update krew_rule_attr_t set CLS_NM = 'org.kuali.coeus.common.framework.unit.crrspndnt.UnitCorrespondentRoleAttribute' where CLS_NM = 'org.kuali.kra.workflow.UnitCorrespondentRoleAttribute';
update krew_rule_attr_t set CLS_NM = 'org.kuali.coeus.common.impl.org.crrspndnt.OrganizationCorrespondentRoleAttribute' where CLS_NM = 'org.kuali.kra.workflow.OrganizationCorrespondentRoleAttribute';
update krew_rule_attr_t set XML = '<resolverConfig>\n				<attributes name=\"proposal\">\n					<xPathExpression>//document/developmentProposalList[1]/org.kuali.coeus.propdev.impl.core.DevelopmentProposal[1]/proposalNumber[1]</xPathExpression>\n				</attributes>\n			</resolverConfig>\n' where XML = '<resolverConfig>\n				<attributes name=\"proposal\">\n					<xPathExpression>//document/developmentProposalList[1]/org.kuali.kra.proposaldevelopment.bo.DevelopmentProposal[1]/proposalNumber[1]</xPathExpression>\n				</attributes>\n			</resolverConfig>\n';
update krew_rule_attr_t set XML = '<resolverConfig>\n				<attributes name=\"unitNumber\">\n					<xPathExpression>//document/developmentProposalList[1]/org.kuali.coeus.propdev.impl.core.DevelopmentProposal[1]/ownedByUnitNumber[1]</xPathExpression>\n				</attributes>\n			</resolverConfig>\n' where XML = '<resolverConfig>\n				<attributes name=\"unitNumber\">\n					<xPathExpression>//document/developmentProposalList[1]/org.kuali.kra.proposaldevelopment.bo.DevelopmentProposal[1]/ownedByUnitNumber[1]</xPathExpression>\n				</attributes>\n			</resolverConfig>\n';
update krew_rule_attr_t set XML = '<routingConfig>\n				<fieldDef name=\"ownedByUnitNumber\" title=\"Lead Unit\" workflowType=\"RULE\">\n					<display>\n						<type>text</type>\n					</display>\n					<validation required=\"false\"/>\n					<fieldEvaluation>\n						<xpathexpression>\n						  	wf:xstreamsafe(\//document/developmentProposalList[1]/org.kuali.coeus.propdev.impl.core.DevelopmentProposal/ownedByUnitNumber\)= wf:ruledata(\ownedByUnitNumber\)\n						</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</routingConfig>\n' where XML = '<routingConfig>\n				<fieldDef name=\"ownedByUnitNumber\" title=\"Lead Unit\" workflowType=\"RULE\">\n					<display>\n						<type>text</type>\n					</display>\n					<validation required=\"false\"/>\n					<fieldEvaluation>\n						<xpathexpression>\n						  	wf:xstreamsafe(\//document/developmentProposalList[1]/org.kuali.kra.proposaldevelopment.bo.DevelopmentProposal/ownedByUnitNumber\)= wf:ruledata(\ownedByUnitNumber\)\n						</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</routingConfig>\n';
update krew_rule_attr_t set XML = '<routingConfig>\n				<fieldDef name=\"totalCost\" title=\"Total\" workflowType=\"RULE\">\n					<display>\n						<type>text</type>\n					</display>\n					<validation required=\"false\"/>\n					<fieldEvaluation>\n						<xpathexpression>\n							wf:xstreamsafe(\//document/developmentProposalList[1]/ownedByUnitNumber\)= \IN-CARD\ and wf:xstreamsafe(\"//budgetDocumentVersions/budgetVersionOverview/org.kuali.coeus.common.budget.framework.version.BudgetVersionOverview/totalCost/value\") &gt;= wf:ruledata(\totalCost\)\n						</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</routingConfig>\n' where XML = '<routingConfig>\n				<fieldDef name=\"totalCost\" title=\"Total\" workflowType=\"RULE\">\n					<display>\n						<type>text</type>\n					</display>\n					<validation required=\"false\"/>\n					<fieldEvaluation>\n						<xpathexpression>\n							wf:xstreamsafe(\//document/developmentProposalList[1]/ownedByUnitNumber\)= \IN-CARD\ and wf:xstreamsafe(\"//budgetDocumentVersions/budgetVersionOverview/org.kuali.kra.budget.versions.BudgetVersionOverview/totalCost/value\") &gt;= wf:ruledata(\totalCost\)\n						</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</routingConfig>\n';
update krew_rule_attr_t set XML = '<searchingConfig>\n				<fieldDef name=\"awardBudgetInvestigator\" title=\"Investigator\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.coeus.common.framework.person.KcPerson\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"awardBudgetInvestigator\" lookupFieldName=\"fullName\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//currentAward/principalInvestigatorName</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n' where XML = '<searchingConfig>\n				<fieldDef name=\"awardBudgetInvestigator\" title=\"Investigator\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.kra.bo.KcPerson\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"awardBudgetInvestigator\" lookupFieldName=\"fullName\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//currentAward/principalInvestigatorName</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n';
update krew_rule_attr_t set XML = '<searchingConfig>\n				<fieldDef name=\"awardBudgetLeadUnit\" title=\"Lead Unit\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.coeus.common.framework.unit.Unit\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"awardBudgetLeadUnit\" lookupFieldName=\"unitNumber\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//currentAward/leadUnit/unitNumber</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n' where XML = '<searchingConfig>\n				<fieldDef name=\"awardBudgetLeadUnit\" title=\"Lead Unit\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.kra.bo.Unit\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"awardBudgetLeadUnit\" lookupFieldName=\"unitNumber\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//currentAward/leadUnit/unitNumber</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n';
update krew_rule_attr_t set XML = '<searchingConfig>\n				<fieldDef name=\"awardBudgetSponsor\" title=\"Sponsor\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.coeus.common.framework.sponsor.Sponsor\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"awardBudgetSponsor\" lookupFieldName=\"sponsorCode\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//currentAward/sponsor/sponsorCode</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n' where XML = '<searchingConfig>\n				<fieldDef name=\"awardBudgetSponsor\" title=\"Sponsor\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.kra.bo.Sponsor\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"awardBudgetSponsor\" lookupFieldName=\"sponsorCode\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//currentAward/sponsor/sponsorCode</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n';
update krew_rule_attr_t set XML = '<searchingConfig>\n				<fieldDef name=\"leadUnit\" title=\"Lead Unit\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.coeus.common.framework.unit.Unit\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"leadUnit\" lookupFieldName=\"unitNumber\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//awardList/org.kuali.kra.award.home.Award/leadUnit/unitNumber</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n' where XML = '<searchingConfig>\n				<fieldDef name=\"leadUnit\" title=\"Lead Unit\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.kra.bo.Unit\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"leadUnit\" lookupFieldName=\"unitNumber\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//awardList/org.kuali.kra.award.home.Award/leadUnit/unitNumber</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n';
update krew_rule_attr_t set XML = '<searchingConfig>\n				<fieldDef name=\"principalInvestigatorName\" title=\"Investigator\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.coeus.common.framework.person.KcPerson\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"principalInvestigatorName\" lookupFieldName=\"fullName\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//awardList/org.kuali.kra.award.home.Award/principalInvestigatorName</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n' where XML = '<searchingConfig>\n				<fieldDef name=\"principalInvestigatorName\" title=\"Investigator\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.kra.bo.KcPerson\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"principalInvestigatorName\" lookupFieldName=\"fullName\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//awardList/org.kuali.kra.award.home.Award/principalInvestigatorName</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n';
update krew_rule_attr_t set XML = '<searchingConfig>\n				<fieldDef name=\"sponsor\" title=\"Sponsor\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.coeus.common.framework.sponsor.Sponsor\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"sponsor\" lookupFieldName=\"sponsorCode\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//awardList/org.kuali.kra.award.home.Award/sponsor/sponsorCode</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n' where XML = '<searchingConfig>\n				<fieldDef name=\"sponsor\" title=\"Sponsor\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.kra.bo.Sponsor\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"sponsor\" lookupFieldName=\"sponsorCode\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//awardList/org.kuali.kra.award.home.Award/sponsor/sponsorCode</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n';
update krew_rule_attr_t set XML = '<searchingConfig>\n				<fieldDef name=\"timeAndMoneyInvestigator\" title=\"Investigator\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.coeus.common.framework.person.KcPerson\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"timeAndMoneyInvestigator\" lookupFieldName=\"fullName\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//award/principalInvestigatorName</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n' where XML = '<searchingConfig>\n				<fieldDef name=\"timeAndMoneyInvestigator\" title=\"Investigator\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.kra.bo.KcPerson\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"timeAndMoneyInvestigator\" lookupFieldName=\"fullName\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//award/principalInvestigatorName</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n';
update krew_rule_attr_t set XML = '<searchingConfig>\n				<fieldDef name=\"timeAndMoneyLeadUnit\" title=\"Lead Unit\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.coeus.common.framework.unit.Unit\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"timeAndMoneyLeadUnit\" lookupFieldName=\"unitNumber\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//award/leadUnit/unitNumber</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n' where XML = '<searchingConfig>\n				<fieldDef name=\"timeAndMoneyLeadUnit\" title=\"Lead Unit\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.kra.bo.Unit\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"timeAndMoneyLeadUnit\" lookupFieldName=\"unitNumber\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//award/leadUnit/unitNumber</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n';
update krew_rule_attr_t set XML = '<searchingConfig>\n				<fieldDef name=\"timeAndMoneySponsor\" title=\"Sponsor\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.coeus.common.framework.sponsor.Sponsor\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"timeAndMoneySponsor\" lookupFieldName=\"sponsorCode\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//award/sponsor/sponsorCode</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n' where XML = '<searchingConfig>\n				<fieldDef name=\"timeAndMoneySponsor\" title=\"Sponsor\">\n					<display>\n						<type>text</type>\n					</display>\n					<lookup businessObjectClass=\"org.kuali.kra.bo.Sponsor\">\n				      <fieldConversions>\n				        <fieldConversion localFieldName=\"timeAndMoneySponsor\" lookupFieldName=\"sponsorCode\"/>\n				      </fieldConversions>\n				    </lookup>\n					<fieldEvaluation>\n						<xpathexpression>//award/sponsor/sponsorCode</xpathexpression>\n					</fieldEvaluation>\n				</fieldDef>\n			</searchingConfig>\n';
update krew_rule_rsp_t set NM = 'org.kuali.coeus.common.framework.unit.admin.UnitAdministratorRoleAttribute!UnitAdministratorRoleAttribute!UnitAdministrator' where NM = 'org.kuali.kra.workflow.UnitAdministratorRoleAttribute!UnitAdministratorRoleAttribute!UnitAdministrator';
